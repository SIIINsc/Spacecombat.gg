<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Star Citizen Space Combat Communication Protocol</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="header-main">
        <div>
          <p class="eyebrow">Star Citizen</p>
          <h1>Space Combat Communication Protocol</h1>
          <p class="subhead">Concise, standardized call-outs for fast, precise coordination.</p>
        </div>
        <div class="header-actions">
          <button id="adminToggle" class="btn btn-outline" type="button">Admin</button>
          <div class="status-pill" id="adminStatus">Viewer mode</div>
        </div>
      </div>
      <div class="header-disclaimer">
        <strong>Convenience-only lock:</strong> This is a static offline page. The admin password only prevents accidental edits, it is not real security.
      </div>
      <nav class="top-nav">
        <div class="nav-left">
          <input id="searchInput" type="search" placeholder="Search callouts, meanings, notes..." aria-label="Search callouts" />
        </div>
        <div class="nav-right">
          <button id="expandAll" class="btn btn-ghost" type="button">Expand all</button>
          <button id="collapseAll" class="btn btn-ghost" type="button">Collapse all</button>
        </div>
      </nav>
      <nav class="category-nav" id="categoryNav"></nav>
    </header>

    <main>
      <section class="panel" id="rules">
        <div class="panel-header">
          <h2>Rules of Use</h2>
        </div>
        <div class="panel-body rules-grid">
          <div class="rule-card">
            <h3>Core Rules</h3>
            <ul>
              <li>One call = one state.</li>
              <li>No narration.</li>
              <li>Silence is correct.</li>
              <li>Same breath rule (3–5 seconds).</li>
              <li>Same breath → name optional.</li>
              <li>Time passes → name required.</li>
              <li>Category change → name required.</li>
              <li>Personal state uses speaker name; shared truth never uses speaker name.</li>
            </ul>
          </div>
          <div class="rule-card">
            <h3>Critical Definitions</h3>
            <ul>
              <li>Remove “Push” entirely (it does not exist).</li>
              <li><strong>Regroup on:</strong> re-center on anchor, can remain engaged or re-engage quickly.</li>
              <li><strong>Reset:</strong> disengage and reset fight state (break contact).</li>
              <li><strong>Red (PERSONAL):</strong> critical health, not necessarily about to die, can be safe but fragile.</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="panel" id="flow">
        <div class="panel-header">
          <h2>Flow Diagrams</h2>
        </div>
        <div class="panel-body flow-grid">
          <div class="flow-card">
            <h3>Target Cycle</h3>
            <div class="flow-row">
              <span class="flow-node">Target</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Looking / Seen</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Merging</span>
            </div>
            <div class="flow-row">
              <span class="flow-node">Effective / Not effective</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Red (TARGET)</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Splash</span>
              <span class="flow-divider">or</span>
              <span class="flow-node">Target out</span>
            </div>
            <div class="flow-row">
              <span class="flow-node">New Target</span>
            </div>
          </div>
          <div class="flow-card">
            <h3>Regroup Cycle</h3>
            <div class="flow-row">
              <span class="flow-node">Regroup on</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Distance (optional)</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Ready</span>
            </div>
          </div>
          <div class="flow-card">
            <h3>Threat Interrupt</h3>
            <div class="flow-row">
              <span class="flow-node">Aggro</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Evasive</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Low boost</span>
              <span class="flow-arrow">→</span>
              <span class="flow-node">Clear</span>
            </div>
            <div class="flow-row">
              <span class="flow-node emphasis">Red (PERSONAL)</span>
              <span class="flow-note">Critical state interrupt at any time</span>
            </div>
          </div>
        </div>
      </section>

      <section class="panel" id="adminPanel">
        <div class="panel-header">
          <h2>Admin Tools</h2>
        </div>
        <div class="panel-body admin-tools">
          <div class="admin-row">
            <label class="toggle">
              <input id="enableNameEdit" type="checkbox" />
              <span>Enable call name editing (safety lock)</span>
            </label>
          </div>
          <div class="admin-row">
            <button id="saveData" class="btn" type="button">Save</button>
            <button id="resetData" class="btn btn-outline" type="button">Reset to default</button>
            <button id="exportData" class="btn btn-outline" type="button">Export JSON</button>
            <label class="btn btn-outline" for="importData">Import JSON</label>
            <input id="importData" type="file" accept="application/json" />
          </div>
          <p class="admin-note">
            Save writes to localStorage on this device. Export/Import lets you share edits as JSON.
          </p>
        </div>
      </section>

      <section id="callouts"></section>
    </main>

    <footer class="site-footer">
      <p>How to run: open <code>index.html</code> directly in a browser.</p>
      <p class="footer-note">Viewer/Admin lock is convenience-only because this is a static offline site.</p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
